You can embed Neo4j for testing by including a dependency on the Neo4j test harness:

dependency:neo4j-harness[groupId="org.neo4j.test", scope="test"]

The Neo4j test harness also requires a runtime dependency on `javax.annotation` and `javax.validation`

dependency:javax.annotation-api[version="1.3.2", groupId="javax.annotation", scope="testRuntimeOnly"]
dependency:validation-api[version="2.0.1.Final", groupId="javax.validation", scope="testRuntimeOnly"]

If the Neo4j server is not already running on the configured port an embedded version will be started.

You can configure the options for the embedded Neo4j server using the `neo4j.embedded` settings exposed by api:neo4j.bolt.Neo4jBoltConfiguration[].

One useful option is `ephemeral` which ensures the data is cleaned up between test runs. For example in `application-test.yml`:

.Using ephemeral
[source,yaml]
----
neo4j:
    embedded:
        ephemeral: true
----

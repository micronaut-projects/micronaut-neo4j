plugins {
    id 'io.micronaut.build.internal.module'
}

dependencies {
    annotationProcessor "io.micronaut.docs:micronaut-docs-asciidoc-config-props:$micronautDocsVersion"
    annotationProcessor mn.micronaut.inject.java
    api "org.neo4j.driver:neo4j-java-driver:$neo4jDriverVersion"
    api mn.micronaut.runtime
    api mn.micronaut.validation
    api mn.reactor
    compileOnly "org.neo4j.test:neo4j-harness:$neo4jVersion"
    compileOnly mn.micronaut.management
    testImplementation "org.neo4j.test:neo4j-harness:$neo4jVersion"
    testImplementation mn.micronaut.management
    testImplementation mn.micronaut.test.spock
    testImplementation mn.spock
}

micronautBuild {
	resolutionStrategy {
		force "org.neo4j.test:neo4j-harness:$neo4jVersion"
	}
}

test {
    if (JavaVersion.current() != JavaVersion.VERSION_1_8) {
        jvmArgs '--add-exports=java.base/sun.nio.ch=ALL-UNNAMED'
    }
}

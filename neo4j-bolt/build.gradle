dependencies {
    annotationProcessor "io.micronaut:micronaut-inject-java"
    annotationProcessor "io.micronaut.docs:micronaut-docs-asciidoc-config-props:$micronautDocsVersion"    

    api "io.micronaut:micronaut-runtime:$micronautVersion"
    api "io.micronaut:micronaut-validation:$micronautVersion"
    api "org.neo4j.driver:neo4j-java-driver:$neo4jDriverVersion"
    api "io.projectreactor:reactor-core"

    compileOnly "io.micronaut:micronaut-management"
    compileOnly "org.neo4j.test:neo4j-harness:$neo4jVersion"
    testImplementation "org.neo4j.test:neo4j-harness:$neo4jVersion"
    testImplementation "io.micronaut:micronaut-management"

    testImplementation("org.spockframework:spock-core:${spockVersion}") {
        exclude module:'groovy-all'
    }
    testImplementation "io.micronaut.test:micronaut-test-spock:$micronautTestVersion"
}

micronautBuild {
	resolutionStrategy {
		force "org.neo4j.test:neo4j-harness:$neo4jVersion"
	}
}

test {
    if (JavaVersion.current() != JavaVersion.VERSION_1_8) {
        jvmArgs '--add-exports=java.base/sun.nio.ch=ALL-UNNAMED'
    }
}
